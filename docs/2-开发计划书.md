# ğŸ›’ åˆ†å¸ƒå¼ç”µå•†ç³»ç»Ÿå¼€å‘è®¡åˆ’ä¹¦

## ä¸€ã€é¡¹ç›®æ¦‚è§ˆ

æœ¬é¡¹ç›®æ—¨åœ¨æ„å»ºä¸€ä¸ªåŸºäº ASP.NET Core å¾®æœåŠ¡æ¶æ„çš„åˆ†å¸ƒå¼ç”µå•†å¹³å°ï¼Œé‡‡ç”¨ DDD åˆ†å±‚è®¾è®¡ï¼Œå…·å¤‡é«˜å¯ç”¨æ€§ã€å¯æ‰©å±•æ€§ã€æ¨¡å—è§£è€¦å’Œè‰¯å¥½çš„ç»´æŠ¤æ€§ã€‚æ¶µç›–æ³¨å†Œç™»å½•ã€å•†å“ç®¡ç†ã€è´­ç‰©è½¦ã€ä¸‹å•ã€æ”¯ä»˜ã€åº“å­˜ç­‰å®Œæ•´ä¸šåŠ¡é“¾è·¯ï¼Œæ”¯æŒå®¹å™¨åŒ–éƒ¨ç½²ï¼Œé›†æˆ Redisã€RabbitMQã€Elasticsearchã€Serilogã€IdentityServer4 ç­‰ä¸­é—´ä»¶ã€‚

------

## äºŒã€ç³»ç»Ÿå¼€å‘ä»»åŠ¡æ‹†è§£ï¼ˆWBSï¼‰

### ğŸ“Œ é˜¶æ®µä¸€ï¼šä¸šåŠ¡å»ºæ¨¡ä¸ç³»ç»Ÿæ¶æ„è®¾è®¡

| ç¼–å· | ä»»åŠ¡å†…å®¹                             | è¾“å‡ºæˆæœ                     |
| ---- | ------------------------------------ | ---------------------------- |
| 1.1  | ç³»ç»Ÿæ•´ä½“æ¶æ„å›¾è®¾è®¡                   | æ¶æ„å›¾ï¼ˆDraw.ioã€PlantUMLï¼‰  |
| 1.2  | æ¨¡å—æ‹†è§£ä¸èŒè´£è¾¹ç•Œæ˜ç¡®               | æœåŠ¡åˆ’åˆ†è¯´æ˜æ–‡æ¡£             |
| 1.3  | DDD å»ºæ¨¡ï¼šèšåˆã€å®ä½“ã€å€¼å¯¹è±¡å®šä¹‰     | å„æœåŠ¡é¢†åŸŸæ¨¡å‹è‰å›¾ä¸è®¾è®¡è¯´æ˜ |
| 1.4  | ä¸Šä¸‹æ–‡è¾¹ç•Œä¸ Context Mapping         | Bounded Context å›¾           |
| 1.5  | å…³é”®ä¸šåŠ¡æµç¨‹å»ºæ¨¡ï¼ˆæ³¨å†Œã€ä¸‹å•ã€å‘è´§ï¼‰ | ç”¨ä¾‹å›¾ã€æ´»åŠ¨å›¾ã€æ³³é“å›¾       |

------

### ğŸ“Œ é˜¶æ®µäºŒï¼šå¾®æœåŠ¡éª¨æ¶æ­å»ºä¸åŸºç¡€è®¾æ–½æ¥å…¥

| ç¼–å· | ä»»åŠ¡å†…å®¹                                        | è¾“å‡ºæˆæœ                        |
| ---- | ----------------------------------------------- | ------------------------------- |
| 2.1  | æ­å»ºæ•´ä½“ç›®å½•ç»“æ„ä¸è§£å†³æ–¹æ¡ˆï¼ˆ.slnï¼‰              | å®Œæ•´é¡¹ç›®éª¨æ¶                    |
| 2.2  | å„æœåŠ¡åˆå§‹åŒ–ï¼ˆä»…å¯åŠ¨ API é¡¹ç›® + Swaggerï¼‰       | å¯è¿è¡Œçš„ç©ºé¡¹ç›®ç»“æ„              |
| 2.3  | **ç”¨æˆ·ä¸èº«ä»½æœåŠ¡åŸºç¡€æ¨¡å‹ï¼ˆUser + Roleï¼‰æ­å»º**   | æä¾›é‰´æƒæœåŠ¡çš„æ•°æ®æºæ¨¡å‹        |
| 2.4  | IdentityServer4 é‰´æƒä¸­å¿ƒæ­å»ºï¼ˆæ”¯æŒ JWT/OAuth2ï¼‰ | ç»Ÿä¸€è®¤è¯æœåŠ¡ï¼Œç»‘å®šç”¨æˆ·æ¨¡å‹      |
| 2.5  | API ç½‘å…³é…ç½®ï¼ˆYARPï¼‰                            | æ”¯æŒç»Ÿä¸€è·¯ç”±ï¼Œé‰´æƒæ‹¦æˆª          |
| 2.6  | é›†æˆ Serilog æ—¥å¿—è¾“å‡º + Sink                    | æ§åˆ¶å° + æ–‡ä»¶è¾“å‡ºï¼Œæ—¥å¿—ç»Ÿä¸€æ ¼å¼ |
| 2.7  | å¼‚å¸¸å¤„ç†ã€å“åº”ç»“æ„å°è£… Middleware               | å…¨å±€å¼‚å¸¸ä¸­é—´ä»¶ï¼Œè§„èŒƒæ¥å£å“åº”    |
| 2.8  | Redis é€šç”¨ç¼“å­˜æœåŠ¡å°è£… + æ³¨å†Œä¸­é—´å±‚             | å¯ä¾èµ–æ³¨å…¥çš„ç¼“å­˜æ¥å£            |
| 2.9  | RabbitMQ å°è£…ç”Ÿäº§è€…/æ¶ˆè´¹è€…ç»“æ„                  | åŸºç±»å°è£…ï¼Œæä¾›å‘å¸ƒè®¢é˜…èƒ½åŠ›      |

------

### ğŸ“Œ é˜¶æ®µä¸‰ï¼šæ ¸å¿ƒä¸šåŠ¡æœåŠ¡å¼€å‘

| ç¼–å· | æ¨¡å—                                             | åŠŸèƒ½ç‚¹                                                       |
| ---- | ------------------------------------------------ | ------------------------------------------------------------ |
| 3.1  | èº«ä»½æœåŠ¡ Identityï¼ˆ UserModule+ IdentityModuleï¼‰ | ç”¨æˆ·ä¿¡æ¯ã€åœ°å€ç®¡ç†ã€ç™»å½•æ—¥å¿—ç­‰+ æ³¨å†Œã€ç™»å½•ã€è§’è‰²æƒé™ã€Token å‘æ”¾ç­‰ |
| 3.2  | å•†å“æœåŠ¡ Product                                 | å“ç‰Œã€ç±»ç›®ã€SPU/SKUã€åˆ†é¡µã€æœç´¢ã€ä¸Šä¸‹æ¶                      |
| 3.3  | åº“å­˜æœåŠ¡ Inventory                               | æ‰£å‡åº“å­˜ã€è§£é”åº“å­˜ã€åŒæ­¥åº“å­˜ã€é¢„è­¦æœºåˆ¶                       |
| 3.4  | è´­ç‰©è½¦æœåŠ¡ Cart                                  | æ·»åŠ è´­ç‰©è½¦ã€æ›´æ–°æ•°é‡ã€åˆ é™¤ã€åˆå¹¶ç™»å½•å‰åè´­ç‰©è½¦               |
| 3.5  | è®¢å•æœåŠ¡ Order                                   | åˆ›å»ºè®¢å•ã€å–æ¶ˆè®¢å•ã€è®¢å•çŠ¶æ€å˜æ›´ã€è®¢å•è¯¦æƒ…æŸ¥è¯¢               |
| 3.6  | æ”¯ä»˜æœåŠ¡ Payment                                 | è®¢å•æ”¯ä»˜ã€æ”¯ä»˜å›è°ƒã€æŸ¥è¯¢æ”¯ä»˜çŠ¶æ€ã€é€€æ¬¾é€»è¾‘å¤„ç†               |

------

### ğŸ“Œ é˜¶æ®µå››ï¼šä¸­é—´ä»¶é€šä¿¡ä¸äº‹ä»¶é©±åŠ¨æ•´åˆ

| ç¼–å· | å†…å®¹                                   | è¾“å‡ºæˆæœ                               |
| ---- | -------------------------------------- | -------------------------------------- |
| 4.1  | äº‹ä»¶å‘å¸ƒå°è£…ï¼ˆDomainEvent + MQ å‘é€ï¼‰  | MQ å‘å¸ƒåŸºç±»ã€æ¥å£ã€ æ”¯æŒè·¨æœåŠ¡äº‹ä»¶é©±åŠ¨ |
| 4.2  | æ¶ˆè´¹è€…ç»Ÿä¸€ç»“æ„ä¸å¤±è´¥é‡è¯•æœºåˆ¶           | æ¶ˆè´¹è€…åŸºç±»ã€å¼‚å¸¸é‡è¯•ç­–ç•¥å°è£…           |
| 4.3  | è®¢å•åˆ›å»º â†’ åº“å­˜é”å®š â†’ æ”¯ä»˜é€šçŸ¥æµç¨‹æ¢³ç† | æ—¶åºå›¾ã€æµç¨‹æ–‡æ¡£                       |

------

### ğŸ“Œ é˜¶æ®µäº”ï¼šåå°ç®¡ç†ç«¯ï¼ˆadminï¼‰

| ç¼–å· | å†…å®¹                                                     | è¾“å‡ºæˆæœ                         |
| ---- | -------------------------------------------------------- | -------------------------------- |
| 5.1  | ä½¿ç”¨ MVC æ„å»ºåå° Web é¡¹ç›®                               | ECommerce.Admin.Web é¡¹ç›®å¯åŠ¨æˆåŠŸ |
| 5.2  | æ¥å…¥æˆæƒæœºåˆ¶ï¼ˆCookie + JWTæ··åˆ/ OAuth2 é‰´æƒ + æƒé™æ§åˆ¶ï¼‰ | æƒé™é™åˆ¶ç­–ç•¥ä¸è§’è‰²ç®¡ç†ç•Œé¢       |
| 5.3  | å•†å“/è®¢å•/ç”¨æˆ·ç®¡ç†ç•Œé¢                                   | å¯ç”¨çš„ç®¡ç†è§†å›¾ä¸è¡¨å•é¡µé¢         |

### ğŸ“Œ é˜¶æ®µå…­ï¼šå‰ç«¯å¼€å‘ä¸ç•Œé¢è®¾è®¡

| ç¼–å· | ä»»åŠ¡å†…å®¹                              | è¾“å‡ºæˆæœ                                |
| ---- | ------------------------------------- | --------------------------------------- |
| 6.1  | ç³»ç»ŸUIè®¾è®¡ä¸å‰ç«¯æŠ€æœ¯é€‰å‹ï¼ˆReact/Vueï¼‰ | UIè®¾è®¡ç¨¿ï¼ˆFigmaï¼‰ã€é€‰å‹æŠ¥å‘Š             |
| 6.2  | åˆå§‹åŒ–é¡¹ç›®ç»“æ„ä¸é¡µé¢è·¯ç”±é…ç½®          | å‰ç«¯é¡¹ç›®åŸºç¡€ç»“æ„ä¸è·¯ç”±æ¨¡å—              |
| 6.3  | ç”¨æˆ·æ³¨å†Œã€ç™»å½•ä¸æƒé™éªŒè¯é¡µé¢å¼€å‘      | æ³¨å†Œç™»å½•é¡µé¢ï¼ŒJWTé›†æˆï¼Œç™»å½•æ€ç®¡ç†       |
| 6.4  | å•†å“å±•ç¤ºã€æœç´¢ä¸ç­›é€‰åŠŸèƒ½é¡µé¢å¼€å‘      | å•†å“åˆ—è¡¨é¡µã€å•†å“è¯¦æƒ…é¡µã€æœç´¢æ ç­‰ç»„ä»¶    |
| 6.5  | è´­ç‰©è½¦ç®¡ç†ã€è®¢å•ç¡®è®¤ä¸æ”¯ä»˜ç•Œé¢å¼€å‘    | è´­ç‰©è½¦ç»„ä»¶ã€è®¢å•æäº¤é¡µé¢ã€æ”¯ä»˜é€»è¾‘      |
| 6.6  | ç”¨æˆ·ä¸­å¿ƒä¸è®¢å•å†å²é¡µé¢å¼€å‘            | ä¸ªäººä¿¡æ¯é¡µé¢ã€å†å²è®¢å•æŸ¥çœ‹æ¨¡å—          |
| 6.7  | ä¸åç«¯APIè”è°ƒå¹¶å¤„ç†é”™è¯¯/åŠ è½½çŠ¶æ€      | è”è°ƒæŠ¥å‘Šã€APIå°è£…å·¥å…·ã€é”™è¯¯å¤„ç†æœºåˆ¶å®Œå–„ |
| 6.8  | å“åº”å¼å¸ƒå±€ä¸å…¼å®¹æ€§ä¼˜åŒ–                | ç§»åŠ¨ç«¯é€‚é…ã€å¸¸è§æµè§ˆå™¨å…¼å®¹æ€§å¤„ç†æŠ¥å‘Š    |
| 6.9  | å‰ç«¯æµ‹è¯•ä¸ä»£ç å®¡æŸ¥                    | å•å…ƒæµ‹è¯•ç”¨ä¾‹ã€PRå®¡æŸ¥è®°å½•ã€Bugä¿®å¤æ¸…å•   |

### ğŸ“Œ é˜¶æ®µä¸ƒï¼šåŸºç¡€è®¾æ–½ä¸ä¸­é—´ä»¶é›†æˆ

| ç¼–å· | å†…å®¹                                 | è¾“å‡ºæˆæœ                              |
| ---- | ------------------------------------ | ------------------------------------- |
| 7.1  | å•å…ƒæµ‹è¯•è¦†ç›–ä¸é›†æˆæµ‹è¯•ç¼–å†™           | æµ‹è¯•æŠ¥å‘Šã€æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š              |
| 7.2  | CI/CD æµæ°´çº¿é…ç½®ï¼ˆGitHub Actionsï¼‰   | Dockerfile + build æµç¨‹               |
| 7.3  | å®¹å™¨åŒ–éƒ¨ç½²ï¼ˆdocker-compose æœ¬åœ°ï¼‰    | æ‰€æœ‰æœåŠ¡å¯ç”¨ï¼Œèƒ½æ­£å¸¸è°ƒç”¨              |
| 7.4  | Kubernetes é…ç½® + Helm Chart         | å¯éƒ¨ç½²è‡³é›†ç¾¤çš„ YAML ä¸ Helm åŒ…        |
| 7.5  | æ—¥å¿—ç³»ç»Ÿï¼ˆSerilog â†’ Elasticsearchï¼‰  | ç»“æ„åŒ–æ—¥å¿— + å¯æŸ¥è¯¢æ—¥å¿—ç•Œé¢ï¼ˆKibanaï¼‰ |
| 7.6  | ç³»ç»Ÿç›‘æ§æ¥å…¥ï¼ˆPrometheus + Grafanaï¼‰ | æœåŠ¡çŠ¶æ€å¯è§†åŒ– Dashboard              |

------

## ä¸‰ã€å¼€å‘æµç¨‹è·¯çº¿

### âœ… æ¨èå¼€å‘è·¯å¾„

1. **å…ˆå®Œæˆï¼šåŸºç¡€éª¨æ¶ + èº«ä»½æœåŠ¡ + ç½‘å…³è¿é€š**
2. **å†å¼€å‘ï¼šå•†å“ â†’ è´­ç‰©è½¦ â†’ è®¢å• â†’ æ”¯ä»˜ â†’ åº“å­˜**
3. **è¿‡ç¨‹ä¸­å¹¶è¡Œé›†æˆï¼šRedisã€MQã€æ—¥å¿—ã€è®¤è¯ã€å¼‚å¸¸å¤„ç†**
4. **æœ€åä¸Šçº¿å‰åšæµ‹è¯•ã€å®¹å™¨åŒ–ã€ç›‘æ§éƒ¨ç½²ç­‰æ“ä½œ**

### âœ… æ¨è DDD é¡¹ç›®ç»“æ„

> å®Œæ•´é¡¹ç›®ç»“æ„è¯·è§ã€Š1-æŠ€æœ¯æ–¹æ¡ˆã€‹æ–‡æ¡£

```bash
ECommercePlatform/
â”œâ”€â”€ admin/
â”‚   â””â”€â”€ ECommerce.Admin.Web/
â”‚       â”œâ”€â”€ Controllers/
â”‚       â”œâ”€â”€ Models/
â”‚       â”œâ”€â”€ Services/
â”‚       â””â”€â”€ Views/

â”œâ”€â”€ gateway/
â”‚   â””â”€â”€ ECommerce.APIGateway/
â”‚       â”œâ”€â”€ Configs/
â”‚       â”œâ”€â”€ Extensions/
â”‚       â””â”€â”€ Middlewares/

â”œâ”€â”€ infrastructure/
â”‚   â”œâ”€â”€ ECommerce.BuildingBlocks/
â”‚   â”‚   â”œâ”€â”€ Authentication/
â”‚   â”‚   â”œâ”€â”€ EventBus/
â”‚   â”‚   â”œâ”€â”€ Extensions/
â”‚   â”‚   â”œâ”€â”€ Logging/
â”‚   â”‚   â”œâ”€â”€ Middlewares/
â”‚   â”‚   â””â”€â”€ Redis/
â”‚   â””â”€â”€ ECommerce.SharedKernel/
â”‚       â”œâ”€â”€ Base/
â”‚       â”œâ”€â”€ Constants/
â”‚       â”œâ”€â”€ DTOs/
â”‚       â”œâ”€â”€ Enums/
â”‚       â”œâ”€â”€ Exceptions/
â”‚       â””â”€â”€ Interfaces/

â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ product/
â”‚   â”‚   â””â”€â”€ ECommerce.Product.API/
â”‚   â”‚       â”œâ”€â”€ Application/
â”‚   â”‚       â”œâ”€â”€ Domain/
â”‚   â”‚       â”œâ”€â”€ Infrastructure/
â”‚   â”‚       â””â”€â”€ Interfaces/
â”‚   â”œâ”€â”€ cart/
â”‚   â”œâ”€â”€ order/
â”‚   â”œâ”€â”€ payment/
â”‚   â””â”€â”€ inventory/
â”‚
â”œâ”€â”€ deployment/
â”‚   â”œâ”€â”€ env/
â”‚   â””â”€â”€ k8s/

â”œâ”€â”€ docs/

â””â”€â”€ tests/
    â””â”€â”€ ECommerce.Product.Tests/
```

------

## å››ã€æŠ€æœ¯æ ˆæ±‡æ€»

| ç±»åˆ«       | æŠ€æœ¯é€‰å‹                                         |
| ---------- | ------------------------------------------------ |
| å‰ç«¯       | Vue 3 + Pinia + Vite + Element Plus              |
| åç«¯æ¡†æ¶   | ASP.NET Core Web API + MVC                       |
| å¾®æœåŠ¡ç½‘å…³ | YARP                                             |
| ORM        | Entity Framework Core + SQL Server               |
| èº«ä»½è®¤è¯   | IdentityServer4 + JWTï¼ˆæ”¯æŒ SSO ä¸ OAuth2 æ‰©å±•ï¼‰ |
| ç¼“å­˜       | Redisï¼ˆæ”¯æŒåˆ†å¸ƒå¼ç¼“å­˜ï¼‰                          |
| æ¶ˆæ¯é˜Ÿåˆ—   | RabbitMQï¼ˆæ”¯æŒå¼‚æ­¥é€šä¿¡ä¸äº‹ä»¶é©±åŠ¨ï¼‰               |
| æœç´¢å¼•æ“   | Elasticsearchï¼ˆå•†å“æ£€ç´¢ä¸æ—¥å¿—æŸ¥è¯¢ï¼‰              |
| æ¥å£æ–‡æ¡£   | Swagger / OpenAPI 3.0                            |
| æ—¥å¿—ç³»ç»Ÿ   | Serilog + Sink.File + Kibana                     |
| é…ç½®ç®¡ç†   | appsettings.json / ç¯å¢ƒå˜é‡ / Secret Manager     |
| CI/CD      | Docker + GitHub Actions + Helm                   |
| éƒ¨ç½²       | Docker Composeï¼ˆå¼€å‘ï¼‰ / Kubernetesï¼ˆç”Ÿäº§ï¼‰      |